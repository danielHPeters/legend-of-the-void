{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/geometry/Dimension.ts","webpack:///./src/lib/math/Vector2.ts","webpack:///./src/enum/AssetId.ts","webpack:///./src/enum/ContextId.ts","webpack:///./src/lib/entity/Entity.ts","webpack:///./src/lib/collision/HitBox.ts","webpack:///./src/lib/observer/Observable.ts","webpack:///./src/application/LegendLoop.ts","webpack:///./src/enum/Actions.ts","webpack:///./src/config/Settings.ts","webpack:///./src/ui/BuildMenu.ts","webpack:///./src/model/Turret.ts","webpack:///./src/model/Tile.ts","webpack:///./src/lib/collision/CollisionManager.ts","webpack:///./src/lib/audio/Sound.ts","webpack:///./src/lib/client/AudioManager.ts","webpack:///./src/lib/interfaces/ICollideAble.ts","webpack:///./src/lib/collision/QuadTree.ts","webpack:///./src/application/LegendState.ts","webpack:///./src/lib/ajax/Ajax.ts","webpack:///./src/lib/graphics/2D/SpriteSheet.ts","webpack:///./src/lib/client/AssetManager.ts","webpack:///./src/lib/client/InputManager.ts","webpack:///./src/application/LegendOfTheVoid.ts","webpack:///./src/app.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","e","[object Object]","width","height","this","factor","Vector2","x","y","v1","v2","vector","scalar","Error","Math","sqrt","magnitude","mag","divide","max","floor","normalize","multiply","pow","AssetId","BASE_VOID","TURRET_LASER","CREEP_VOID_LEECHER","NONE","ContextId","BACKGROUND","CREEPS","PLAYER","position","dimension","settings","JSON","stringify","json","keys","forEach","key","Vector2_1","ICollideAble_1","colliding","collidesWith","type","EntityType","BOX","push","other","includes","toString","observers","state","observer","filter","obs","update","game","lastTime","init","running","frameId","requestAnimationFrame","loop","bind","cancelAnimationFrame","stop","start","paused","time","diff","render","Actions","UP","DOWN","LEFT","RIGHT","SHOOT","RESTART","ROTATE_LEFT","ROTATE_RIGHT","Dimension_1","Actions_1","canvas","gameSize","keyboard","w","ArrowUp","ArrowDown","space","newKey","action","oldKey","findKey","console","log","elementId","turretList","assetManager","element","document","getElementById","turret","turretBox","createElement","labelText","createTextNode","charAt","toUpperCase","slice","image","assetId","toolTipText","classList","add","textContent","description","appendChild","Entity_1","ContextId_1","AssetId_1","damage","super","contextId","ctx","drawImage","asset","clearRect","dt","color","fillStyle","fillRect","quadTree","objects","getAllObjects","length","obj","findObjects","j","isCollideAbleWith","alive","audioContext","masterGain","buffer","gainNode","createGain","gain","connect","playing","source","createBufferSource","Sound_1","initAudioContext","window","AudioContext","webkitAudioContext","effectsGain","ambientGain","destination","data","id","callback","decodeAudioData","then","error","ambient","ENEMY","ENEMY_BULLET","PLAYER_BULLET","MAP","GAME_OVER","LASER","MAIN_THEME","EXPLOSION_I","EXPLOSION_II","ARENA","HitBox_1","QuadTree","hitBox","level","maxObjects","maxLevels","nodes","node","clear","returnedObjects","index","getIndex","Array","insert","split","splice","verticalMidpoint","horizontalMidpoint","topQuadrant","bottomQuadrant","subWidth","subHeight","QuadTree_1","Observable_1","inputManager","entities","collideables","movables","renderables","kills","cash","movable","move","entity","points","notify","Ajax","opts","xHttp","XMLHttpRequest","addEventListener","response","open","method","defaults","url","async","setRequestHeader","contentType","responseType","send","frameWidth","frameHeight","framesPerRow","SpriteSheet_1","Ajax_1","AssetType","SPRITE","SPRITE_SHEET","AUDIO","AUDIO_AMB","audioManager","cache","assetsDir","downloadCount","queue","path","item","create","decodeAudio","done","sprite","Image","src","spriteSheet","loadAudio","loadSprite","loadSpriteSheet","createSound","inputMap","initializeTouchHandler","touches","event","el","evt","preventDefault","touchstartX","pageX","touchstartY","pageY","thisInstance","reset","changedTouches","toucheMoveX","touchMoveY","a","InputManager_1","AssetManager_1","LegendState_1","AudioManager_1","CollisionManager_1","mapData","turretData","Tile_1","Turret_1","BuildMenu_1","contexts","TILE_SIZE","collisionManager","buildMenu","tiles","row","col","tile","blocked","buildable","queueDownload","initMap","downloadAll","renderable","turrets","turr","fromJSON","LegendOfTheVoid_1","Settings_1","LegendLoop_1","container","Map","bgCanvas","creepCanvas","playerCanvas","set","getContext","addTurret"],"mappings":"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","file":"legend.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 26);\n","/**\r\n * Dimension class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Dimension {\r\n  width: number\r\n  height: number\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {number} width Width\r\n   * @param {number} height Height\r\n   */\r\n  constructor (width: number, height: number) {\r\n    this.width = width\r\n    this.height = height\r\n  }\r\n\r\n  /**\r\n   * Scale the dimension.\r\n   *\r\n   * @param {number} factor\r\n   */\r\n  public scale (factor: number) {\r\n    this.width *= factor\r\n    this.height *= factor\r\n  }\r\n}\r\n","import IVector from '../interfaces/IVector'\r\n\r\n/**\r\n * 2D vector implementation.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Vector2 implements IVector {\r\n  public x: number\r\n  public y: number\r\n\r\n  /**\r\n   * Default constructor. Sets x and y values.\r\n   *\r\n   * @param {number} x initial x value\r\n   * @param {number} y initial y value\r\n   */\r\n  constructor (x: number, y: number) {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n\r\n  /**\r\n   * Static addVector method to combine two vectors into a new one.\r\n   *\r\n   * @param {Vector2} v1 first vector\r\n   * @param {Vector2} v2 second vector\r\n   * @returns {Vector2} combined vector\r\n   */\r\n  static addVector (v1: Vector2, v2: Vector2): Vector2 {\r\n    return new Vector2(v1.x + v2.x, v1.y + v2.y)\r\n  }\r\n\r\n  /**\r\n   * Subtract two vector from each other and put the result into a new vector.\r\n   *\r\n   * @param {Vector2} v1 first vector\r\n   * @param {Vector2} v2 second vector\r\n   * @returns {Vector2} resulting vector\r\n   */\r\n  static subtractVector (v1: Vector2, v2: Vector2): Vector2 {\r\n    return new Vector2(v1.x - v2.x, v1.y - v2.y)\r\n  }\r\n\r\n  /**\r\n   * Multiplies a vector with a scalar and returns the resulting vector.\r\n   *\r\n   * @param {Vector2} vector initial vector\r\n   * @param {number} scalar scalar to scale the vector\r\n   * @returns {Vector2} the resulting vector\r\n   */\r\n  static multiply (vector: Vector2, scalar: number): Vector2 {\r\n    return new Vector2(vector.x * scalar, vector.y * scalar)\r\n  }\r\n\r\n  /**\r\n   * Divides a vector by a scalar and returns the result in a new vector.\r\n   * Throws error if trying to divide by zero.\r\n   *\r\n   * @param {Vector2} vector vector to divide\r\n   * @param {number} scalar scalar used to divide vector\r\n   * @returns {Vector2} resulting vector\r\n   */\r\n  static divide (vector: Vector2, scalar: number): Vector2 {\r\n    if (scalar === 0) {\r\n      throw new Error('cannot divide vector by scalar with value \"0\"')\r\n    }\r\n    return new Vector2(vector.x / scalar, vector.y / scalar)\r\n  }\r\n\r\n  /**\r\n   * Set vector with both x and y values.\r\n   *\r\n   * @param {number} x new x value\r\n   * @param {number} y new y value\r\n   */\r\n  set (x: number, y: number): void {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n\r\n  /**\r\n   * Set vector location to another vector.\r\n   *\r\n   * @param {Vector2} vector other vector\r\n   */\r\n  setVector (vector: Vector2): void {\r\n    this.x = vector.x\r\n    this.y = vector.y\r\n  }\r\n\r\n  /**\r\n   * Add x and y to this vector.\r\n   *\r\n   * @param {number} x x value\r\n   * @param {number} y y value\r\n   */\r\n  add (x: number, y: number): void {\r\n    this.x += x\r\n    this.y += y\r\n  }\r\n\r\n  /**\r\n   * Add vector to this vector.\r\n   *\r\n   * @param {Vector2} vector other vector\r\n   */\r\n  addVector (vector: Vector2): void {\r\n    this.x += vector.x\r\n    this.y += vector.y\r\n  }\r\n\r\n  /**\r\n   * Subtraxt x and y from this vector.\r\n   *\r\n   * @param {number} x x value\r\n   * @param {number} y y value\r\n   */\r\n  subtract (x: number, y: number): void {\r\n    this.x -= x\r\n    this.y -= y\r\n  }\r\n\r\n  /**\r\n   * Subtract a vector from this vector.\r\n   *\r\n   * @param {Vector2} vector other vector\r\n   */\r\n  subtractVector (vector: Vector2): void {\r\n    this.x -= vector.x\r\n    this.y -= vector.y\r\n  }\r\n\r\n  /**\r\n   * Multiply this vector by scalar.\r\n   *\r\n   * @param scalar scalar to multiply the vector\r\n   */\r\n  multiply (scalar: number): void {\r\n    this.x *= scalar\r\n    this.y *= scalar\r\n  }\r\n\r\n  /**\r\n   * Divides this vector by a scalar.\r\n   * Throws error when trying to divide by zero.\r\n   *\r\n   * @param {number} scalar scalar used to divide this vector\r\n   */\r\n  divide (scalar: number): void {\r\n    if (scalar === 0) {\r\n      throw new Error('cannot divide vector by \"0\"')\r\n    }\r\n    this.x /= scalar\r\n    this.y /= scalar\r\n  }\r\n\r\n  /**\r\n   * Get the magnitude / elementsCount of this vector.\r\n   *\r\n   * @returns {number} magnitude / elementsCount of this vector\r\n   */\r\n  mag (): number {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y)\r\n  }\r\n\r\n  /**\r\n   * Negate the x and y values of this vector and return the result as a new Vector2 object.\r\n   *\r\n   * @returns {Vector2}\r\n   */\r\n  negative (): Vector2 {\r\n    return new Vector2(-this.x, -this.y)\r\n  }\r\n\r\n  /**\r\n   * Normalize the vector.\r\n   */\r\n  normalize (): void {\r\n    let magnitude = this.mag()\r\n    if (magnitude !== 0) {\r\n      this.divide(magnitude)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Limit the vector to a maximum elementsCount.\r\n   *\r\n   * @param {number} max maximum elementsCount\r\n   */\r\n  limit (max: number): void {\r\n    if (Math.floor(this.mag()) > max) {\r\n      this.normalize()\r\n      this.multiply(max)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the distance of this vector to another vector.\r\n   *\r\n   * @param {Vector2} vector other vector\r\n   * @returns {number} calculated distance\r\n   */\r\n  distanceTo (vector: Vector2): number {\r\n    return Math.sqrt(Math.pow(vector.x - this.x, 2) + Math.pow(vector.y - this.y, 2))\r\n  }\r\n\r\n  /**\r\n   * Get the dot product between this vector and another vector.\r\n   *\r\n   * @param {Vector2} vector\r\n   * @returns {number} the dot product of this vector and the one passed as param.\r\n   */\r\n  dot (vector: Vector2): number {\r\n    return this.x * vector.x + this.y * vector.y\r\n  }\r\n\r\n  floor (): void {\r\n    this.x = Math.floor(this.x)\r\n    this.x = Math.floor(this.x)\r\n  }\r\n\r\n  /**\r\n   * Create a clone of this vector.\r\n   *\r\n   * @returns {Vector2} cloned vector\r\n   */\r\n  clone (): Vector2 {\r\n    return new Vector2(this.x, this.y)\r\n  }\r\n}\r\n","/**\r\n *\r\n */\r\nexport enum AssetId {\r\n  BASE_VOID = 'base-void',\r\n  TURRET_LASER = 'turret-laser',\r\n  CREEP_VOID_LEECHER = 'creep-void-leecher',\r\n  NONE = 'none'\r\n}\r\n","export enum ContextId {\r\n  BACKGROUND = 'background', CREEPS ='creeps' , PLAYER = 'player'\r\n}\r\n","import Vector2 from '../math/Vector2'\r\nimport Settings from '../../config/Settings'\r\nimport Dimension from '../geometry/Dimension'\r\nimport IJSONSerializable from '../interfaces/IJSONSerializable'\r\n\r\n/**\r\n * Base entity class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Entity implements IJSONSerializable {\r\n  id: string\r\n  dimension: Dimension\r\n  settings: Settings\r\n  position: Vector2\r\n\r\n  /**\r\n   * Constructor. Sets position and dimension of entity.\r\n   *\r\n   * @param {Vector2} position Initial position\r\n   * @param {Dimension} dimension Initial dimension\r\n   * @param {Settings} settings\r\n   */\r\n  constructor (position?: Vector2, dimension?: Dimension, settings?: Settings) {\r\n    this.position = position\r\n    this.dimension = dimension\r\n    this.settings = settings\r\n  }\r\n\r\n  public init (): void {\r\n    throw new Error('Implement in subclass.')\r\n  }\r\n\r\n  /**\r\n   * Create a JSON string from this object.\r\n   * \r\n   * @returns {string} The JSoN string\r\n   */\r\n  public toJSON (): string {\r\n    return JSON.stringify(this)\r\n  }\r\n\r\n  /**\r\n   * Load data into this object from JSON.\r\n   *\r\n   * @param json JSON string\r\n   */\r\n  public fromJSON (json: any): void {\r\n    // Map parsed object to the attributes of this entity.\r\n    Object.keys(json).forEach(key => {\r\n      if ( this.hasOwnProperty( key ) ) {\r\n        this[key] = json[key]\r\n      }\r\n    })\r\n  }\r\n}\r\n","import Vector2 from '../math/Vector2'\r\nimport ICollideAble, { EntityType } from '../interfaces/ICollideAble'\r\n\r\n/**\r\n * Hitbox used for defining collision boundaries.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class HitBox implements ICollideAble {\r\n  type: EntityType\r\n  collidesWith\r\n  colliding: boolean\r\n  position: Vector2\r\n  width: number\r\n  height: number\r\n\r\n  /**\r\n   * Initializes position and dimension.\r\n   * @param {number} x position x\r\n   * @param {number} y position y\r\n   * @param {number} width dimension width\r\n   * @param {number} height dimension height\r\n   */\r\n  constructor (x, y, width, height) {\r\n    this.position = new Vector2(x, y)\r\n    this.width = width\r\n    this.height = height\r\n    this.colliding = false\r\n    this.collidesWith = []\r\n    this.type = EntityType.BOX\r\n    this.collidesWith.push(EntityType.PLAYER)\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {ICollideAble} other\r\n   * @returns {boolean}\r\n   */\r\n  isCollideAbleWith (other: ICollideAble): boolean {\r\n    return this.collidesWith.includes(other.type.toString())\r\n  }\r\n}\r\n","import Observer from './Observer'\r\n\r\n/**\r\n * Observable class to be extended by a class that should be observed.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Observable {\r\n  protected observers: Observer[]\r\n  protected state: any\r\n\r\n  constructor () {\r\n    this.observers = []\r\n    this.state = {}\r\n  }\r\n\r\n  /**\r\n   * Register an observer on this observable.\r\n   *\r\n   * @param {Observer} observer Object implementing the Observer interface\r\n   */\r\n  register (observer: Observer): void {\r\n    this.observers.push(observer)\r\n  }\r\nd\r\n  /**\r\n   * Remove an observer from this observables observers list.\r\n   *\r\n   * @param {Observer} observer Object implementing the Observer interface\r\n   */\r\n  unRegister (observer: Observer): void {\r\n    this.observers = this.observers.filter(obs => {return obs !== observer})\r\n  }\r\n\r\n  /**\r\n   * Notify all observers.\r\n   */\r\n  notify (): void {\r\n    this.observers.forEach(observer => observer.update(this.state))\r\n  }\r\n}\r\n","/**\r\n * Legend of the void game loop class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nimport IGameLoop from '../lib/interfaces/IGameLoop'\r\nimport IGame from '../lib/interfaces/IGame'\r\n\r\nexport default class LegendLoop implements IGameLoop {\r\n  public game: IGame\r\n  public lastTime: number\r\n  public frameId: number\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {IGame} game Game instance\r\n   */\r\n  constructor (game: IGame) {\r\n    this.game = game\r\n    this.lastTime = null\r\n  }\r\n\r\n  /**\r\n   * Start the game loop.\r\n   */\r\n  public start (): void {\r\n    this.game.init()\r\n    this.game.state.running = true\r\n    this.frameId = requestAnimationFrame(this.loop.bind(this))\r\n  }\r\n\r\n  /**\r\n   * Stop the game loop.\r\n   */\r\n  public stop (): void {\r\n    this.game.state.running = false\r\n    if (this.frameId) {\r\n      cancelAnimationFrame(this.frameId)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop the game loop and start it again.\r\n   */\r\n  public restart (): void {\r\n    this.stop()\r\n    this.start()\r\n  }\r\n\r\n  /**\r\n   * Pause/unpause game.\r\n   */\r\n  public togglePause (): void {\r\n    this.game.state.paused = !this.game.state.paused\r\n  }\r\n\r\n  /**\r\n   * Main loop executing update and render methods.\r\n   */\r\n  public loop (time: number): void {\r\n    if (this.game.state.running) {\r\n      if (!this.game.state.paused) {\r\n        if (this.lastTime !== null) {\r\n          const diff = time - this.lastTime\r\n          this.game.state.update(diff / 1000)\r\n        }\r\n        this.lastTime = time\r\n        this.game.render()\r\n        this.frameId = requestAnimationFrame(this.loop.bind(this))\r\n      }\r\n    }\r\n  }\r\n}\r\n","export enum Actions {\r\n  UP = 'UP',\r\n  DOWN = 'DOWN',\r\n  LEFT = 'LEFT',\r\n  RIGHT = 'RIGHT',\r\n  SHOOT = 'SHOOT',\r\n  RESTART = 'RESTART',\r\n  ROTATE_LEFT = 'R-LEFT',\r\n  ROTATE_RIGHT = 'R-RIGHT'\r\n}\r\n","import Dimension from '../lib/geometry/Dimension'\r\nimport { Actions } from '../enum/Actions'\r\nimport Player from '../model/Player'\r\n/**\r\n * Pong game settings.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Settings {\r\n  gameSize: Dimension\r\n  canvas: HTMLCanvasElement\r\n  keyboard\r\n  player\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {HTMLCanvasElement} canvas\r\n   */\r\n  constructor (canvas: HTMLCanvasElement) {\r\n    this.gameSize = new Dimension(canvas.width, canvas.height)\r\n    this.canvas = canvas\r\n    this.keyboard = {\r\n      'w': Actions.UP,\r\n      's': Actions.DOWN,\r\n      'ArrowUp': Actions.LEFT,\r\n      'ArrowDown': Actions.RIGHT,\r\n      'space': Actions.SHOOT,\r\n      'r': Actions.RESTART\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param value\r\n   * @returns {string}\r\n   */\r\n  findKey (value): string {\r\n    return Object.keys(this.keyboard).filter(key => this.keyboard[key] === value)[0]\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param newKey\r\n   * @param {Actions} action\r\n   */\r\n  setKey (newKey, action: Actions): void {\r\n    let oldKey = this.findKey(action)\r\n    if (newKey !== oldKey) {\r\n      console.log('old:' + oldKey, ' new: ' + newKey + ' value: ' + action)\r\n      this.keyboard[newKey] = this.keyboard[oldKey]\r\n      delete this.keyboard[oldKey]\r\n    }\r\n  }\r\n}\r\n","import IGameState from '../lib/interfaces/IGameState'\r\nimport Turret from '../model/Turret'\r\nimport AssetManager from '../lib/client/AssetManager'\r\n\r\n/** \r\n * Build menu for building Towers etc.\r\n * \r\n * @author Daniel Peters\r\n * @version 1.0\r\n*/\r\nexport default class BuildMenu {\r\n  element: HTMLElement\r\n  state: IGameState\r\n  turretList: Turret[]\r\n  assetManager: AssetManager\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {string} elementId\r\n   * @param {Turret[]} turretList\r\n   * @param assetManager\r\n   */\r\n  constructor (elementId: string, turretList, assetManager: AssetManager) {\r\n    this.element = document.getElementById(elementId)\r\n    this.turretList = turretList\r\n    this.assetManager = assetManager\r\n  }\r\n\r\n  /**\r\n   * Initialize the menu.\r\n   */\r\n  init (): void {\r\n    this.turretList.forEach(turret => {\r\n      const turretBox = document.createElement('div')\r\n      const labelText = document.createTextNode(turret.type.charAt(0).toUpperCase() + turret.type.slice(1))\r\n      const image = this.assetManager.get(turret.assetId)\r\n      const toolTipText = document.createElement('span')\r\n      toolTipText.classList.add('tooltiptext')\r\n      toolTipText.textContent = turret.description\r\n      turretBox.classList.add('tooltip')\r\n      turretBox.classList.add('build-box')\r\n      turretBox.appendChild(image)\r\n      turretBox.appendChild(labelText)\r\n      turretBox.appendChild(toolTipText)\r\n      this.element.appendChild(turretBox)\r\n    })\r\n  }\r\n}\r\n","import Entity from '../lib/entity/Entity'\r\nimport Vector2 from '../lib/math/Vector2'\r\nimport Dimension from '../lib/geometry/Dimension'\r\nimport Settings from '../config/Settings'\r\nimport IRenderable from '../lib/interfaces/IRenderable'\r\nimport IMovable from '../lib/interfaces/IMovable'\r\nimport { ContextId } from '../enum/ContextId'\r\nimport { TurretType } from '../enum/TurretType'\r\nimport { AssetId } from '../enum/AssetId'\r\n\r\n/**\r\n * Turret class.\r\n * \r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Turret extends Entity implements IRenderable, IMovable {\r\n  type: TurretType\r\n  description: string\r\n  assetId: AssetId\r\n  damage: number\r\n  rate: number\r\n  range: number\r\n  asset\r\n  contextId: ContextId\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {number} x Starting position on x axis\r\n   * @param {number} y Starting position on y axis\r\n   * @param {number} width Turret width\r\n   * @param {number} height Turret height\r\n   * @param {number} damage Turret attack\r\n   * @param {Settings} settings Game settings.\r\n   * @param {TurretType} type\r\n   * @param {AssetId} assetId\r\n   */\r\n  constructor (x?: number, y?: number, width?: number, height?: number,\r\n               damage?: number, settings?: Settings, type?: TurretType, assetId: AssetId = AssetId.TURRET_LASER) {\r\n    super(new Vector2(x, y), new Dimension(width, height), settings)\r\n    this.type = type\r\n    this.damage = damage\r\n    this.contextId = ContextId.PLAYER\r\n    this.assetId = assetId\r\n  }\r\n\r\n  public init (): void {\r\n    \r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {CanvasRenderingContext2D} ctx \r\n   */\r\n  public render (ctx: CanvasRenderingContext2D) {\r\n    ctx.drawImage(this.asset, this.position.x, this.position.y, this.dimension.width, this.dimension.height)\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {CanvasRenderingContext2D} ctx \r\n   */\r\n  public clear (ctx: CanvasRenderingContext2D) {\r\n    ctx.clearRect(this.position.x, this.position.y, this.dimension.width, this.dimension.height)\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {number} dt \r\n   */\r\n  public move (dt: number) {\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  private shoot (): void {\r\n\r\n  }\r\n}\r\n","import Entity from '../lib/entity/Entity'\r\nimport Settings from '../config/Settings'\r\nimport Vector2 from '../lib/math/Vector2'\r\nimport Dimension from '../lib/geometry/Dimension'\r\nimport Turret from './Turret'\r\nimport IRenderable from '../lib/interfaces/IRenderable'\r\nimport { ContextId } from '../enum/ContextId'\r\nimport { AssetId } from '../enum/AssetId'\r\n\r\n/**\r\n * 2D Tower defense tile class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Tile extends Entity implements IRenderable {\r\n  contextId: ContextId\r\n  assetId: AssetId\r\n  asset\r\n  blocked: boolean\r\n  buildable: boolean\r\n  turret: Turret\r\n  color: string\r\n\r\n  /**\r\n   * Conscrutor.\r\n   *\r\n   * @param x\r\n   * @param y\r\n   * @param width\r\n   * @param height\r\n   * @param settings\r\n   */\r\n  constructor (x: number, y: number, width: number, height: number, settings: Settings) {\r\n    super(new Vector2(x, y), new Dimension(width, height), settings)\r\n    this.color = '#ffffff'\r\n    this.contextId = ContextId.BACKGROUND\r\n    this.assetId = AssetId.NONE\r\n  }\r\n\r\n  init (): void {\r\n\r\n  }\r\n\r\n  render (ctx: CanvasRenderingContext2D): void {\r\n    ctx.fillStyle = this.color\r\n    ctx.fillRect(this.position.x, this.position.y, this.dimension.width, this.dimension.height)\r\n  }\r\n\r\n  clear (ctx: CanvasRenderingContext2D): void {\r\n    ctx.clearRect(this.position.x, this.position.y, this.dimension.width, this.dimension.height)\r\n  }\r\n}\r\n","import QuadTree from './QuadTree'\r\nimport ICollisionManager from '../interfaces/ICollisionManager'\r\n\r\n/**\r\n * Collision Manager.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class CollisionManager implements ICollisionManager {\r\n  quadTree: QuadTree\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {QuadTree} quadTree\r\n   */\r\n  constructor (quadTree: QuadTree) {\r\n    this.quadTree = quadTree\r\n  }\r\n\r\n  /**\r\n   * Collision detection algorithm.\r\n   */\r\n  detectCollision (): void {\r\n    let objects = []\r\n    this.quadTree.getAllObjects(objects)\r\n    for (let i = 0; i < objects.length; i++) {\r\n      let obj = []\r\n      this.quadTree.findObjects(obj, objects[i])\r\n\r\n      for (let j = 0; j < obj.length; j++) {\r\n        if (objects[i].isCollideAbleWith(obj[j]) &&\r\n          (Math.floor(objects[i].position.x) < Math.floor(obj[j].position.x) + obj[j].dimension.width &&\r\n            Math.floor(objects[i].position.x) + objects[i].dimension.width > Math.floor(obj[j].position.x) &&\r\n            Math.floor(objects[i].position.y) < Math.floor(obj[j].position.y) + obj[j].dimension.height &&\r\n            Math.floor(objects[i].position.y) + objects[i].dimension.height > Math.floor(obj[j].position.y))\r\n        && objects[i].alive && obj[j].alive) {\r\n          console.log(objects[i])\r\n          objects[i].colliding = true\r\n          obj[j].colliding = true\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Sound class used to play a sound from a file.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Sound {\r\n  audioContext: AudioContext\r\n  source: AudioBufferSourceNode\r\n  gainNode: GainNode\r\n  masterGain: GainNode\r\n  buffer\r\n  playing: boolean\r\n\r\n  /**\r\n   *\r\n   * @param audioContext\r\n   * @param {GainNode} masterGain\r\n   * @param buffer\r\n   */\r\n  constructor (audioContext, masterGain: GainNode, buffer) {\r\n    this.audioContext = audioContext\r\n    this.masterGain = masterGain\r\n    this.buffer = buffer\r\n    this.gainNode = this.audioContext.createGain()\r\n    this.gainNode.gain.value = 0.2\r\n    this.gainNode.connect(this.masterGain)\r\n    this.playing = false\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {boolean} loop\r\n   */\r\n  play (loop = false): void {\r\n    this.source = this.audioContext.createBufferSource()\r\n    this.source.buffer = this.buffer\r\n    this.source.loop = loop\r\n    this.source.connect(this.gainNode)\r\n    this.source.start(0)\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  stop (): void {\r\n    if (this.source) {\r\n      this.source.stop(0)\r\n    }\r\n  }\r\n}\r\n","import Sound from '../audio/Sound'\r\n\r\n/**\r\n * Audio manager class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class AudioManager {\r\n  private audioContext: AudioContext\r\n  private masterGain: GainNode\r\n  private effectsGain: GainNode\r\n  private ambientGain: GainNode\r\n\r\n  /**\r\n   *\r\n   */\r\n  constructor () {\r\n    this.initAudioContext()\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  initAudioContext (): void {\r\n    try {\r\n      // Fix for browsers using prefixes\r\n      window.AudioContext = window.AudioContext || webkitAudioContext\r\n      this.audioContext = new AudioContext()\r\n      this.masterGain = this.audioContext.createGain()\r\n      this.effectsGain = this.audioContext.createGain()\r\n      this.ambientGain = this.audioContext.createGain()\r\n      this.masterGain.gain.value = 1\r\n      this.masterGain.connect(this.audioContext.destination)\r\n      this.effectsGain.connect(this.masterGain)\r\n      this.ambientGain.connect(this.masterGain)\r\n      this.ambientGain.gain.value = 1\r\n      this.effectsGain.gain.value = 1\r\n    } catch (e) {\r\n      console.log('Web Audio API is not supported in this browser')\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param data\r\n   * @param id\r\n   * @param callback\r\n   */\r\n  decodeAudio (data, id, callback): void {\r\n    this.audioContext.decodeAudioData(data).then(\r\n      buffer => callback(buffer),\r\n      error => { console.log('Error with decoding audio data' + error) }\r\n    )\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {number} value\r\n   */\r\n  adjustMasterVolume (value: number): void {\r\n    this.masterGain.gain.value = value\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {number} value\r\n   */\r\n  adjustAmbientVolume (value: number): void {\r\n    this.ambientGain.gain.value = value\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {number} value\r\n   */\r\n  adjustEffectsVolume (value: number): void {\r\n    this.effectsGain.gain.value = value\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param buffer\r\n   * @param {boolean} ambient\r\n   * @returns {Sound}\r\n   */\r\n  createSound (buffer, ambient: boolean): Sound {\r\n    return new Sound(this.audioContext, ambient ? this.ambientGain : this.effectsGain, buffer)\r\n  }\r\n}\r\n","export enum EntityType {\r\n  PLAYER = 'ship',\r\n  ENEMY = 'enemy',\r\n  ENEMY_BULLET = 'bulletEnemy',\r\n  PLAYER_BULLET = 'bullet',\r\n  BACKGROUND = 'background',\r\n  MAP = 'map',\r\n  GAME_OVER = 'gameOver',\r\n  LASER = 'laser',\r\n  MAIN_THEME = 'shockWave',\r\n  EXPLOSION_I = 'explosion1',\r\n  EXPLOSION_II = 'explosion2',\r\n  BOX = 'box',\r\n  ARENA = 'arena'\r\n}\r\n\r\n/**\r\n * Interface for collideable entities.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default interface ICollideAble {\r\n  collidesWith: EntityType[]\r\n  colliding: boolean\r\n  type: EntityType\r\n\r\n  /**\r\n   *\r\n   * @param {ICollideAble} other\r\n   * @returns {boolean}\r\n   */\r\n  isCollideAbleWith (other: ICollideAble): boolean\r\n}\r\n","import HitBox from './HitBox'\r\nimport ICollideAble from '../interfaces/ICollideAble'\r\n\r\n/**\r\n * QuadTree class used to optimize collision checking.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class QuadTree {\r\n  level: number\r\n  maxObjects: number\r\n  maxLevels: number\r\n  hitBox: HitBox\r\n  objects: ICollideAble[]\r\n  nodes: QuadTree[]\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {HitBox} hitBox\r\n   * @param {number} level\r\n   */\r\n  constructor (hitBox = new HitBox(0, 0, 0, 0), level = 0) {\r\n    this.level = level\r\n    this.maxObjects = 10\r\n    this.maxLevels = 5\r\n    this.hitBox = hitBox\r\n    this.objects = []\r\n    this.nodes = []\r\n  }\r\n\r\n  /**\r\n   * Clears the QuadTree and its sub nodes from all models objects.\r\n   */\r\n  clear (): void {\r\n    this.objects = []\r\n    this.nodes.forEach(node => node.clear())\r\n    this.nodes = []\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param returnedObjects\r\n   * @returns {any}\r\n   */\r\n  getAllObjects (returnedObjects) {\r\n    this.nodes.forEach(node => node.getAllObjects(returnedObjects))\r\n    this.objects.forEach(object => returnedObjects.push(object))\r\n    return returnedObjects\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param returnedObjects\r\n   * @param object\r\n   * @returns {any}\r\n   */\r\n  findObjects (returnedObjects, object) {\r\n    if (typeof object === 'undefined') {\r\n      console.log('UNDEFINED OBJECT')\r\n      return\r\n    }\r\n    let index = this.getIndex(object)\r\n    if (index !== -1 && this.nodes.length) {\r\n      this.nodes[index].findObjects(returnedObjects, object)\r\n    }\r\n    this.objects.forEach(obj => returnedObjects.push(obj))\r\n    return returnedObjects\r\n  }\r\n\r\n  /**\r\n   * Insert an object into the QuadTree.\r\n   *\r\n   * @param object\r\n   */\r\n  insert (object): void {\r\n    if (typeof object === 'undefined') {\r\n      return\r\n    }\r\n    if (object instanceof Array) {\r\n      object.forEach(element => this.insert(element))\r\n      return\r\n    }\r\n    if (this.nodes.length > 0) {\r\n      let index = this.getIndex(object)\r\n      // Only addVector the object to a sub node if it can fit completely within one\r\n      if (index !== -1) {\r\n        this.nodes[index].insert(object)\r\n        return\r\n      }\r\n    }\r\n    this.objects.push(object)\r\n\r\n    if (this.objects.length > this.maxObjects && this.level < this.maxLevels) {\r\n      if (typeof this.nodes[0] === 'undefined') {\r\n        this.split()\r\n      }\r\n      let i = 0\r\n      while (i < this.objects.length) {\r\n        let index = this.getIndex(this.objects[i])\r\n        if (index !== -1) {\r\n          this.nodes[index].insert((this.objects.splice(i, 1))[0])\r\n        } else {\r\n          i++\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the index of an object from the QuadTree.\r\n   *\r\n   * @param object\r\n   * @returns {number}\r\n   */\r\n  getIndex (object): number {\r\n    let index = -1\r\n    let verticalMidpoint = this.hitBox.position.x + this.hitBox.width / 2\r\n    let horizontalMidpoint = this.hitBox.position.y + this.hitBox.height / 2\r\n    // Object can fit completely within the top quadrant\r\n    let topQuadrant = (object.position.y < horizontalMidpoint && object.position.y + object.height < horizontalMidpoint)\r\n    // Object can fit completely within the bottom quadrant\r\n    let bottomQuadrant = (object.position.y > horizontalMidpoint)\r\n    // Object can fit completely within the left quadrants\r\n    if (object.position.x < verticalMidpoint && object.position.x + object.width < verticalMidpoint) {\r\n      if (topQuadrant) {\r\n        index = 1\r\n      } else if (bottomQuadrant) {\r\n        index = 2\r\n      }\r\n    } else if (object.position.x > verticalMidpoint) { // Object can fix completely within the right quadrants\r\n      if (topQuadrant) {\r\n        index = 0\r\n      } else if (bottomQuadrant) {\r\n        index = 3\r\n      }\r\n    }\r\n    return index\r\n  }\r\n\r\n  /**\r\n   * Split the tree on demand.\r\n   */\r\n  split (): void {\r\n    let subWidth = (this.hitBox.width / 2) | 0\r\n    let subHeight = (this.hitBox.height / 2) | 0\r\n    this.nodes[0] = new QuadTree(\r\n      new HitBox(this.hitBox.position.x + subWidth, this.hitBox.position.y, subWidth, subHeight), this.level + 1)\r\n    this.nodes[1] = new QuadTree(\r\n      new HitBox(this.hitBox.position.x, this.hitBox.position.y, subWidth, subHeight), this.level + 1)\r\n    this.nodes[2] = new QuadTree(\r\n      new HitBox(this.hitBox.position.x, this.hitBox.position.y + subHeight, subWidth, subHeight), this.level + 1)\r\n    this.nodes[3] = new QuadTree(\r\n      new HitBox(this.hitBox.position.x + subWidth, this.hitBox.position.y + subHeight, subWidth, subHeight), this.level + 1)\r\n  }\r\n}\r\n","import IGameState from '../lib/interfaces/IGameState'\r\nimport QuadTree from '../lib/collision/QuadTree'\r\nimport Entity from '../lib/entity/Entity'\r\nimport ICollideAble from '../lib/interfaces/ICollideAble'\r\nimport Settings from '../config/Settings'\r\nimport InputManager from '../lib/client/InputManager'\r\nimport IRenderable from '../lib/interfaces/IRenderable'\r\nimport IMovable from '../lib/interfaces/IMovable'\r\nimport Tile from '../model/Tile'\r\nimport Observable from '../lib/observer/Observable'\r\nimport HitBox from '../lib/collision/HitBox'\r\n\r\n/**\r\n * Legend of the void game state class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class LegendState extends Observable implements IGameState {\r\n  public running: boolean\r\n  public paused: boolean\r\n  public quadTree: QuadTree\r\n  public entities: Entity[]\r\n  public collideables: ICollideAble[]\r\n  public movables: IMovable[]\r\n  public renderables: IRenderable[]\r\n  public map: Tile[]\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {Settings} settings\r\n   * @param {InputManager} inputManager\r\n   */\r\n  constructor (settings: Settings, inputManager: InputManager) {\r\n    super()\r\n    this.running = false\r\n    this.paused = false\r\n    this.entities = []\r\n    this.quadTree = new QuadTree(new HitBox(0, 0, settings.gameSize.width, settings.gameSize.height))\r\n    this.collideables = []\r\n    this.movables = []\r\n    this.renderables = []\r\n    this.state = {\r\n      kills: 0,\r\n      cash: 0\r\n    }\r\n  }\r\n\r\n  public update (dt: number): void {\r\n    this.movables.forEach(movable => movable.move(dt))\r\n  }\r\n\r\n  public reset (): void {\r\n    this.entities.forEach(entity => entity.init())\r\n  }\r\n\r\n  public scorePoints (points: number): void {\r\n    this.state.cash += points\r\n    this.state.kills++\r\n    this.notify()\r\n  }\r\n}\r\n","export default class Ajax {\r\n  private static defaults = {\r\n    url: '',\r\n    method: 'GET',\r\n    contentType: 'text/html',\r\n    async: true,\r\n    data: null\r\n  }\r\n\r\n  /**\r\n   * Create and send an XML-HTTP request.\r\n   * Requires an options object.\r\n   *\r\n   * @param opts Possible option properties:\r\n   * url = url to send the request to.\r\n   * method = request method. GET, POST, PUT, DELETE.\r\n   * contentType = specify the content type of the request.\r\n   * async = boolean flag for async calls. Defaults to true.\r\n   * data = request body.\r\n   * @param callback success callback function\r\n   */\r\n  public static create (opts, callback): void {\r\n    let xHttp = new XMLHttpRequest()\r\n    xHttp.addEventListener('load', () => {\r\n      callback(xHttp.response)\r\n    })\r\n    xHttp.open(\r\n      opts.method ? opts.method : Ajax.defaults.method,\r\n      opts.url ? opts.url : Ajax.defaults.url,\r\n      opts.async ? opts.async : Ajax.defaults.async\r\n    )\r\n    if (opts.hasOwnProperty('contentType')) {\r\n      xHttp.setRequestHeader(\r\n        'Content-Type',\r\n        opts.contentType ? opts.contentType : Ajax.defaults.contentType\r\n      )\r\n    }\r\n    if (opts.hasOwnProperty('responseType')) {\r\n      xHttp.responseType = opts.responseType\r\n    }\r\n    if (opts.hasOwnProperty('data') && typeof opts.data === 'object') {\r\n      opts.data = JSON.stringify(opts.data)\r\n    }\r\n    xHttp.send(opts.data ? opts.data : null)\r\n  }\r\n}\r\n","/**\r\n * Sprite sheet definition.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class SpriteSheet {\r\n  public image: HTMLImageElement\r\n  public frameWidth: number\r\n  public frameHeight: number\r\n  public framesPerRow: number\r\n\r\n  /**\r\n   * Constructor. Sets frame dimensions and calculates number of frames.\r\n   *\r\n   * @param image\r\n   * @param frameWidth\r\n   * @param frameHeight\r\n   */\r\n  constructor (image: HTMLImageElement, frameWidth, frameHeight) {\r\n    this.image = image\r\n    this.frameWidth = frameWidth\r\n    this.frameHeight = frameHeight\r\n    this.framesPerRow = Math.floor(image.width / frameWidth)\r\n  }\r\n}\r\n","import SpriteSheet from '../graphics/2D/SpriteSheet'\r\nimport Ajax from '../ajax/Ajax'\r\nimport { AssetId } from '../../enum/AssetId'\r\nimport AudioManager from './AudioManager'\r\n\r\nexport enum AssetType {\r\n  SPRITE = 'sprite', SPRITE_SHEET = 'sprite-sheet', AUDIO = 'audio', AUDIO_AMB = 'audio-amb'\r\n}\r\n\r\n/**\r\n * Asset manager Class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class AssetManager {\r\n  private cache\r\n  private assetsDir: string\r\n  private queue\r\n  private downloadCount: number\r\n  private audioManager: AudioManager\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {AudioManager} audioManager\r\n   */\r\n  constructor (audioManager: AudioManager) {\r\n    this.cache = []\r\n    this.assetsDir = 'assets/'\r\n    this.downloadCount = 0\r\n    this.queue = []\r\n    this.audioManager = audioManager\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  done (): boolean {\r\n    return this.downloadCount === this.queue.length\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {AssetId} id\r\n   * @param {AssetType} type\r\n   * @param opts\r\n   */\r\n  queueDownload (id: AssetId, type: AssetType, opts = null): void {\r\n    this.queue.push({ id: id, path: this.assetsDir + type + '/' + id + '.png', type: type, opts: opts })\r\n  }\r\n\r\n  /**\r\n   * Build an AJAX Request to loadAudio audio file into the buffer cache.\r\n   *\r\n   * @param item object with name of file and path to file\r\n   * @param callback function to execute on done\r\n   */\r\n  loadAudio (item, callback): void {\r\n    Ajax.create({\r\n      method: 'GET',\r\n      url: item.path,\r\n      responseType: 'arraybuffer'\r\n    }, response => {\r\n      this.audioManager.decodeAudio(response, item.id, buffer => {\r\n        this.cache[item.id] = buffer\r\n        this.downloadCount += 1\r\n        if (this.done()) {\r\n          callback()\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param item\r\n   * @param callback\r\n   */\r\n  loadSprite (item, callback): void {\r\n    let sprite = new Image()\r\n    sprite.addEventListener('load', () => {\r\n      this.downloadCount++\r\n      if (this.done()) {\r\n        callback()\r\n      }\r\n    })\r\n    sprite.src = item.path\r\n    this.cache[item.id] = sprite\r\n  }\r\n\r\n  /**\r\n   * Load sprites sheet.\r\n   *\r\n   * @param item sprite sheet info\r\n   * @param callback called upon downloading all\r\n   */\r\n  loadSpriteSheet (item, callback): void {\r\n    let spriteSheet = new Image()\r\n    spriteSheet.addEventListener('load', () => {\r\n      this.cache[item.id] = new SpriteSheet(spriteSheet, item.opts.frameWidth || 0, item.opts.frameHeight || 0)\r\n      this.downloadCount += 1\r\n      if (this.done()) {\r\n        callback()\r\n      }\r\n    })\r\n    spriteSheet.src = item.path\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param callback\r\n   */\r\n  downloadAll (callback): void {\r\n    this.queue.forEach(item => {\r\n      if (item.type === AssetType.AUDIO) {\r\n        this.loadAudio(item, callback)\r\n      } else if (item.type === AssetType.SPRITE) {\r\n        this.loadSprite(item, callback)\r\n      } else if (item.type === AssetType.SPRITE_SHEET) {\r\n        this.loadSpriteSheet(item, callback)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Create an audio buffer source node from cached buffer.\r\n   * Send it to the destination of the audio context and play it.\r\n   *\r\n   * @param {AssetId} id File id\r\n   * @param {AssetType} type\r\n   */\r\n  get (id: AssetId, type: AssetType = AssetType.SPRITE): any {\r\n    if (type === AssetType.AUDIO || type === AssetType.AUDIO_AMB) {\r\n      let ambient = type === AssetType.AUDIO_AMB\r\n      return this.audioManager.createSound(this.cache[id], ambient)\r\n    } else {\r\n      return this.cache[id]\r\n    }\r\n  }\r\n}\r\n","import Observable from '../observer/Observable'\r\nimport Settings from '../../config/Settings'\r\n\r\n/**\r\n * Input manager class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class InputManager extends Observable {\r\n  inputMap\r\n  touches\r\n\r\n  /**\r\n   *\r\n   */\r\n  constructor (settings: Settings) {\r\n    super()\r\n    this.inputMap = settings.keyboard\r\n    this.init()\r\n    this.initializeTouchHandler()\r\n    this.touches = {\r\n      start: [],\r\n      move: []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Register pressed keys and notify observers.\r\n   */\r\n  init (): void {\r\n    window.addEventListener('keydown', event => {\r\n      let key = event.key !== ' ' ? event.key : 'space'\r\n      this.state[this.inputMap[key]] = true\r\n      this.notify()\r\n    })\r\n    window.addEventListener('keyup', event => {\r\n      let key = event.key !== ' ' ? event.key : 'space'\r\n      this.state[this.inputMap[key]] = false\r\n      this.notify()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Maps swipe directions to key press booleans.\r\n   * Allows touch controls on mobile.\r\n   */\r\n  initializeTouchHandler (): void {\r\n    // Register the event listeners\r\n    let button = document.getElementById('move')\r\n    let el = button ? button : window\r\n    el.addEventListener('touchstart', handleTouchStart, false)\r\n    el.addEventListener('touchmove', handleTouchMove, false)\r\n    el.addEventListener('touchend', handleTouchEnd, false)\r\n\r\n    let start = []\r\n    let move = []\r\n    let touchstartX = 0\r\n    let touchstartY = 0\r\n    let toucheMoveX = 0\r\n    let touchMoveY = 0\r\n    let thisInstance = this\r\n\r\n    function handleTouchStart (evt): void {\r\n      evt.preventDefault()\r\n      start = evt.touches\r\n      touchstartX = evt.touches[0].pageX\r\n      touchstartY = evt.touches[0].pageY\r\n    }\r\n\r\n    function handleTouchMove (evt): void {\r\n      thisInstance.reset()\r\n      evt.preventDefault()\r\n      move = evt.changedTouches\r\n      toucheMoveX = evt.touches[0].pageX\r\n      touchMoveY = evt.touches[0].pageY\r\n      for (let i = 0; i < evt.touches.length; i++) {\r\n        // Positive values equals left. Negative values equals right\r\n        if (move[i].pageX < start[i].pageX) {\r\n          thisInstance.state[thisInstance.inputMap['a']] = true\r\n        }\r\n        if (move[i].pageX > start[i].pageX) {\r\n          thisInstance.state[thisInstance.inputMap['d']] = true\r\n        }\r\n        if (move[i].pageY < start[i].pageY) {\r\n          thisInstance.state[thisInstance.inputMap['w']] = true\r\n        }\r\n        if (move[i].pageY > start[i].pageY) {\r\n          thisInstance.state[thisInstance.inputMap['s']] = true\r\n        }\r\n        thisInstance.notify()\r\n      }\r\n    }\r\n\r\n    function handleTouchEnd (evt): void {\r\n      evt.preventDefault()\r\n      thisInstance.reset()\r\n    }\r\n  }\r\n\r\n  shoot (): void {\r\n    this.state[this.inputMap['space']] = true\r\n  }\r\n\r\n  cancelShoot (): void {\r\n    this.state[this.inputMap['space']] = false\r\n  }\r\n\r\n  reset (): void {\r\n    this.state[this.inputMap['w']] = false\r\n    this.state[this.inputMap['a']] = false\r\n    this.state[this.inputMap['s']] = false\r\n    this.state[this.inputMap['d']] = false\r\n  }\r\n}\r\n","import IGameState from '../lib/interfaces/IGameState'\r\nimport IGame from '../lib/interfaces/IGame'\r\nimport ICollisionManager from '../lib/interfaces/ICollisionManager'\r\nimport InputManager from '../lib/client/InputManager'\r\nimport AssetManager, { AssetType } from '../lib/client/AssetManager'\r\nimport { ContextId } from '../enum/ContextId'\r\nimport Settings from '../config/Settings'\r\nimport LegendState from './LegendState'\r\nimport AudioManager from '../lib/client/AudioManager'\r\nimport CollisionManager from '../lib/collision/CollisionManager'\r\nimport * as mapData from '../../public/definitions/maps.json'\r\nimport * as turretData from '../../public/definitions/turrets.json'\r\nimport Tile from '../model/Tile'\r\nimport Turret from '../model/Turret'\r\nimport Dimension from '../lib/geometry/Dimension'\r\nimport Vector2 from '../lib/math/Vector2'\r\nimport { AssetId } from '../enum/AssetId'\r\nimport BuildMenu from '../ui/BuildMenu'\r\n\r\n/**\r\n * Main game Class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class LegendOfTheVoid implements IGame {\r\n  audioManager: AudioManager\r\n  inputManager: InputManager\r\n  assetManager: AssetManager\r\n  collisionManager: ICollisionManager\r\n  state: IGameState\r\n  contexts: Map<ContextId, CanvasRenderingContext2D>\r\n  settings: Settings\r\n  buildMenu: BuildMenu\r\n  private TILE_SIZE = 60\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {Map<ContextId, CanvasRenderingContext2D>} contexts\r\n   * @param {Settings} settings\r\n   */\r\n  constructor (contexts: Map<ContextId, CanvasRenderingContext2D>, settings: Settings) {\r\n    this.audioManager = new AudioManager()\r\n    this.inputManager = new InputManager(settings)\r\n    this.assetManager = new AssetManager(this.audioManager)\r\n    this.state = new LegendState(settings, this.inputManager)\r\n    this.collisionManager = new CollisionManager(this.state.quadTree)\r\n    this.contexts = contexts\r\n    this.settings = settings\r\n    this.buildMenu = new BuildMenu('buildMenu', turretData, this.assetManager)\r\n  }\r\n\r\n  initMap (): void {\r\n    console.log(mapData)\r\n    let y = 0\r\n    mapData[0].tiles.forEach(row => {\r\n      let width = this.TILE_SIZE\r\n      let height = this.TILE_SIZE\r\n      let x = 0\r\n      row.forEach(col => {\r\n        const tile = new Tile(x, y, width, height, this.settings)\r\n        switch (col) {\r\n          case 0:\r\n            tile.blocked = true\r\n            tile.color = '#000000'\r\n            break\r\n          case 1:\r\n            tile.buildable = true\r\n            tile.color = '#ff00ff'\r\n            break\r\n          case 3:\r\n            tile.color = '#00ff00'\r\n            break\r\n          case 4:\r\n            tile.color = '#ff0000'\r\n            break\r\n        }\r\n        this.state.entities.push(tile)\r\n        this.state.renderables.push(tile)\r\n        x += width\r\n      })\r\n      y += height\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Initialize the game.\r\n   */\r\n  init (): void {\r\n    this.assetManager.queueDownload(AssetId.TURRET_LASER, AssetType.SPRITE)\r\n    this.initMap()\r\n    this.assetManager.downloadAll(() => {\r\n      //console.log(this.state.renderables)\r\n      this.state.renderables\r\n        .filter(element => {return element.assetId !== AssetId.NONE })\r\n        .forEach(renderable => renderable.asset = this.assetManager.get(renderable.assetId))\r\n      this.state.reset()\r\n      this.buildMenu.init()\r\n    })\r\n  }\r\n\r\n  addTurret (type: string, position: Vector2) {\r\n    let turrets = (<any>turretData)\r\n    let turr = new Turret()\r\n    turr.fromJSON(turrets.filter(turret => {return turret.type === type})[0])\r\n    turr.position = position\r\n    turr.dimension = new Dimension(this.TILE_SIZE, this.TILE_SIZE)\r\n    turr.asset = this.assetManager.get(turr.assetId)\r\n    this.state.entities.push(turr)\r\n    this.state.renderables.push(turr)\r\n  }\r\n\r\n  /**\r\n   * Render current state.\r\n   */\r\n  render (): void {\r\n    this.state.renderables.forEach(renderable => renderable.render(this.contexts.get(renderable.contextId)))\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  clear (): void {\r\n    this.state.renderables.forEach(renderable => renderable.clear(this.contexts.get(renderable.contextId)))\r\n  }\r\n}\r\n","import LegendOfTheVoid from './application/LegendOfTheVoid'\r\nimport GameSettings from './config/Settings'\r\nimport { ContextId } from './enum/ContextId'\r\nimport LegendLoop from './application/LegendLoop'\r\nimport Vector2 from './lib/math/Vector2'\r\n\r\n/**\r\n * Entry script for legend of the void.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const container = document.getElementById('contents')\r\n  const contexts = new Map<ContextId, CanvasRenderingContext2D>()\r\n  const bgCanvas = document.createElement('canvas')\r\n  const creepCanvas = document.createElement('canvas')\r\n  const playerCanvas = document.createElement('canvas')\r\n  const canvasSize = 660\r\n  container.appendChild(bgCanvas)\r\n  container.appendChild(creepCanvas)\r\n  container.appendChild(playerCanvas)\r\n  contexts.set(ContextId.BACKGROUND, bgCanvas.getContext('2d'))\r\n  contexts.set(ContextId.CREEPS, creepCanvas.getContext('2d'))\r\n  contexts.set(ContextId.PLAYER, playerCanvas.getContext('2d'))\r\n  bgCanvas.width = canvasSize\r\n  bgCanvas.height = canvasSize\r\n  creepCanvas.width = canvasSize\r\n  creepCanvas.height = canvasSize\r\n  playerCanvas.width = canvasSize\r\n  playerCanvas.height = canvasSize\r\n\r\n  const settings = new GameSettings(bgCanvas)\r\n  const game = new LegendOfTheVoid(contexts, settings)\r\n  const loop = new LegendLoop(game)\r\n\r\n  loop.start()\r\n  game.addTurret(\"laser\", new Vector2(2, 2))\r\n})"],"sourceRoot":""}