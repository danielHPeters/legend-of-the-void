{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/enum/ContextId.ts","webpack:///./src/lib/geometry/Dimension.ts","webpack:///./src/lib/math/Vector2.ts","webpack:///./src/lib/collision/HitBox.ts","webpack:///./src/lib/observer/Observable.ts","webpack:///./src/LegendLoop.ts","webpack:///./src/enum/Actions.ts","webpack:///./src/config/Settings.ts","webpack:///./src/lib/entity/Entity.ts","webpack:///./src/model/Tile.ts","webpack:///./src/lib/collision/CollisionManager.ts","webpack:///./src/lib/audio/Sound.ts","webpack:///./src/lib/client/AudioManager.ts","webpack:///./src/lib/interfaces/ICollideAble.ts","webpack:///./src/lib/collision/QuadTree.ts","webpack:///./src/LegendState.ts","webpack:///./src/lib/ajax/Ajax.ts","webpack:///./src/lib/graphics/2D/SpriteSheet.ts","webpack:///./src/lib/client/AssetManager.ts","webpack:///./src/lib/client/InputManager.ts","webpack:///./src/LegendOfTheVoid.ts","webpack:///./src/app.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","e","ContextId","BACKGROUND","CREEPS","PLAYER","[object Object]","width","height","this","factor","Vector2","x","y","v1","v2","vector","scalar","Error","_x","_y","Math","sqrt","magnitude","mag","divide","max","floor","normalize","multiply","pow","Vector2_1","ICollideAble_1","position","colliding","collidesWith","type","EntityType","BOX","push","other","includes","toString","observers","state","observer","filter","obs","forEach","update","game","lastTime","init","running","frameId","requestAnimationFrame","loop","bind","cancelAnimationFrame","stop","start","paused","time","diff","render","Actions","UP","DOWN","LEFT","RIGHT","SHOOT","RESTART","ROTATE_LEFT","ROTATE_RIGHT","Dimension_1","Actions_1","canvas","gameSize","keyboard","w","ArrowUp","ArrowDown","space","keys","key","newKey","action","oldKey","findKey","console","log","dimension","settings","JSON","stringify","json","obj","parse","Entity_1","ContextId_1","super","color","contextId","ctx","fillStyle","fillRect","clearRect","quadTree","objects","getAllObjects","length","findObjects","j","isCollideAbleWith","alive","audioContext","masterGain","buffer","gainNode","createGain","gain","connect","playing","source","createBufferSource","Sound_1","initAudioContext","window","AudioContext","webkitAudioContext","effectsGain","ambientGain","destination","data","id","callback","decodeAudioData","then","error","ambient","ENEMY","ENEMY_BULLET","PLAYER_BULLET","MAP","GAME_OVER","LASER","MAIN_THEME","EXPLOSION_I","EXPLOSION_II","ARENA","HitBox_1","QuadTree","hitBox","level","maxObjects","maxLevels","nodes","node","clear","returnedObjects","index","getIndex","Array","element","insert","split","splice","verticalMidpoint","horizontalMidpoint","topQuadrant","bottomQuadrant","subWidth","subHeight","QuadTree_1","Observable_1","inputManager","entities","collideables","movables","renderables","kills","cash","dt","movable","move","entity","points","notify","Ajax","opts","xHttp","XMLHttpRequest","addEventListener","response","open","method","defaults","url","async","setRequestHeader","contentType","responseType","send","image","frameWidth","frameHeight","framesPerRow","SpriteSheet_1","Ajax_1","AssetType","SPRITE","SPRITE_SHEET","AUDIO","AUDIO_AMB","audioManager","cache","assetsDir","downloadCount","queue","path","item","create","decodeAudio","audio","done","sprite","Image","src","sprites","spriteSheet","spriteSheets","loadAudio","loadSprite","loadSpriteSheet","createSound","inputMap","initializeTouchHandler","touches","event","el","document","getElementById","evt","preventDefault","touchstartX","pageX","touchstartY","pageY","thisInstance","reset","changedTouches","toucheMoveX","touchMoveY","a","InputManager_1","AssetManager_1","LegendState_1","AudioManager_1","CollisionManager_1","mapData","Tile_1","contexts","assetManager","collisionManager","tiles","row","col","tile","blocked","buildable","downloadAll","renderable","asset","assetId","LegendOfTheVoid_1","Settings_1","LegendLoop_1","container","Map","bgCanvas","createElement","creepCanvas","playerCanvas","appendChild","set","getContext","innerWidth","innerHeight"],"mappings":"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","file":"legend.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","export enum ContextId {\n  BACKGROUND, CREEPS, PLAYER\n}\n","/**\n * Dimension class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class Dimension {\n  width: number\n  height: number\n\n  /**\n   * Constructor.\n   *\n   * @param {number} width Width\n   * @param {number} height Height\n   */\n  constructor (width: number, height: number) {\n    this.width = width\n    this.height = height\n  }\n\n  /**\n   * Scale the dimension.\n   *\n   * @param {number} factor\n   */\n  public scale (factor: number) {\n    this.width *= factor\n    this.height *= factor\n  }\n}\n","/**\n * 2D vector implementation.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class Vector2 {\n  private _x: number\n  private _y: number\n\n  /**\n   * Default constructor. Sets x and y values.\n   *\n   * @param {number} x initial x value\n   * @param {number} y initial y value\n   */\n  constructor (x: number, y: number) {\n    this.x = x\n    this.y = y\n  }\n\n  /**\n   * Static addVector method to combine two vectors into a new one.\n   *\n   * @param {Vector2} v1 first vector\n   * @param {Vector2} v2 second vector\n   * @returns {Vector2} combined vector\n   */\n  static addVector (v1: Vector2, v2: Vector2): Vector2 {\n    return new Vector2(v1.x + v2.x, v1.y + v2.y)\n  }\n\n  /**\n   * Subtract two vector from each other and put the result into a new vector.\n   *\n   * @param {Vector2} v1 first vector\n   * @param {Vector2} v2 second vector\n   * @returns {Vector2} resulting vector\n   */\n  static subtractVector (v1: Vector2, v2: Vector2): Vector2 {\n    return new Vector2(v1.x - v2.x, v1.y - v2.y)\n  }\n\n  /**\n   * Multiplies a vector with a scalar and returns the resulting vector.\n   *\n   * @param {Vector2} vector initial vector\n   * @param {number} scalar scalar to scale the vector\n   * @returns {Vector2} the resulting vector\n   */\n  static multiply (vector: Vector2, scalar: number): Vector2 {\n    return new Vector2(vector.x * scalar, vector.y * scalar)\n  }\n\n  /**\n   * Divides a vector by a scalar and returns the result in a new vector.\n   * Throws error if trying to divide by zero.\n   *\n   * @param {Vector2} vector vector to divide\n   * @param {number} scalar scalar used to divide vector\n   * @returns {Vector2} resulting vector\n   */\n  static divide (vector: Vector2, scalar: number): Vector2 {\n    if (scalar === 0) {\n      throw new Error('cannot divide vector by scalar with value \"0\"')\n    }\n    return new Vector2(vector.x / scalar, vector.y / scalar)\n  }\n\n  /**\n   * Set x value of this vector.\n   *\n   * @param {number} x new x value\n   */\n  set x (x: number) {\n    this._x = x\n  }\n\n  /**\n   * Set y value of this vector.\n   *\n   * @param {number} y new y value\n   */\n  set y (y: number) {\n    this._y = y\n  }\n\n  /**\n   * Getter for x value\n   * @returns {number} x value\n   */\n  get x (): number {\n    return this._x\n  }\n\n  /**\n   * Getter for y value\n   * @returns {number} y value\n   */\n  get y (): number {\n    return this._y\n  }\n\n  /**\n   * Set vector with both x and y values.\n   *\n   * @param {number} x new x value\n   * @param {number} y new y value\n   */\n  set (x: number, y: number): void {\n    this.x = x\n    this.y = y\n  }\n\n  /**\n   * Set vector location to another vector.\n   *\n   * @param {Vector2} vector other vector\n   */\n  setVector (vector: Vector2): void {\n    this.x = vector.x\n    this.y = vector.y\n  }\n\n  /**\n   * Add x and y to this vector.\n   *\n   * @param {number} x x value\n   * @param {number} y y value\n   */\n  add (x: number, y: number): void {\n    this.x += x\n    this.y += y\n  }\n\n  /**\n   * Add vector to this vector.\n   *\n   * @param {Vector2} vector other vector\n   */\n  addVector (vector: Vector2): void {\n    this.x += vector.x\n    this.y += vector.y\n  }\n\n  /**\n   * Subtraxt x and y from this vector.\n   *\n   * @param {number} x x value\n   * @param {number} y y value\n   */\n  subtract (x: number, y: number): void {\n    this.x -= x\n    this.y -= y\n  }\n\n  /**\n   * Subtract a vector from this vector.\n   *\n   * @param {Vector2} vector other vector\n   */\n  subtractVector (vector: Vector2): void {\n    this.x -= vector.x\n    this.y -= vector.y\n  }\n\n  /**\n   * Multiply this vector by scalar.\n   *\n   * @param scalar scalar to multiply the vector\n   */\n  multiply (scalar: number): void {\n    this.x *= scalar\n    this.y *= scalar\n  }\n\n  /**\n   * Divides this vector by a scalar.\n   * Throws error when trying to divide by zero.\n   *\n   * @param {number} scalar scalar used to divide this vector\n   */\n  divide (scalar: number): void {\n    if (scalar === 0) {\n      throw new Error('cannot divide vector by \"0\"')\n    }\n    this.x /= scalar\n    this.y /= scalar\n  }\n\n  /**\n   * Get the magnitude / elementsCount of this vector.\n   *\n   * @returns {number} magnitude / elementsCount of this vector\n   */\n  mag (): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  /**\n   * Negate the x and y values of this vector and return the result as a new Vector2 object.\n   *\n   * @returns {Vector2}\n   */\n  negative (): Vector2 {\n    return new Vector2(-this.x, -this.y)\n  }\n\n  /**\n   * Normalize the vector.\n   */\n  normalize (): void {\n    let magnitude = this.mag()\n    if (magnitude !== 0) {\n      this.divide(magnitude)\n    }\n  }\n\n  /**\n   * Limit the vector to a maximum elementsCount.\n   *\n   * @param max maximum elementsCount\n   */\n  limit (max): void {\n    if (Math.floor(this.mag()) > max) {\n      this.normalize()\n      this.multiply(max)\n    }\n  }\n\n  /**\n   * Get the distance of this vector to another vector.\n   *\n   * @param {Vector2} vector other vector\n   * @returns {number} calculated distance\n   */\n  distanceTo (vector: Vector2): number {\n    return Math.sqrt(Math.pow(vector.x - this.x, 2) + Math.pow(vector.y - this.y, 2))\n  }\n\n  /**\n   * Get the dot product between this vector and another vector.\n   *\n   * @param {Vector2} vector\n   * @returns {number} the dot product of this vector and the one passed as param.\n   */\n  dot (vector: Vector2): number {\n    return this.x * vector.x + this.y * vector.y\n  }\n\n  floor (): void {\n    this.x = Math.floor(this.x)\n    this.x = Math.floor(this.x)\n  }\n\n  /**\n   * Create a clone of this vector.\n   *\n   * @returns {Vector2} cloned vector\n   */\n  clone (): Vector2 {\n    return new Vector2(this.x, this.y)\n  }\n}\n","import Vector2 from '../math/Vector2'\nimport ICollideAble, { EntityType } from '../interfaces/ICollideAble'\n\n/**\n * Hitbox used for defining collision boundaries.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class HitBox implements ICollideAble {\n  type: EntityType\n  collidesWith\n  colliding: boolean\n  position: Vector2\n  width: number\n  height: number\n\n  /**\n   * Initializes position and dimension.\n   * @param {number} x position x\n   * @param {number} y position y\n   * @param {number} width dimension width\n   * @param {number} height dimension height\n   */\n  constructor (x, y, width, height) {\n    this.position = new Vector2(x, y)\n    this.width = width\n    this.height = height\n    this.colliding = false\n    this.collidesWith = []\n    this.type = EntityType.BOX\n    this.collidesWith.push(EntityType.PLAYER)\n  }\n\n  /**\n   *\n   * @param {ICollideAble} other\n   * @returns {boolean}\n   */\n  isCollideAbleWith (other: ICollideAble): boolean {\n    return this.collidesWith.includes(other.type.toString())\n  }\n}\n","import Observer from './Observer'\n\n/**\n * Observable class to be extended by a class that should be observed.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class Observable {\n  protected observers: Observer[]\n  protected state: any\n\n  constructor () {\n    this.observers = []\n    this.state = {}\n  }\n\n  /**\n   * Register an observer on this observable.\n   *\n   * @param {Observer} observer Object implementing the Observer interface\n   */\n  register (observer: Observer): void {\n    this.observers.push(observer)\n  }\nd\n  /**\n   * Remove an observer from this observables observers list.\n   *\n   * @param {Observer} observer Object implementing the Observer interface\n   */\n  unRegister (observer: Observer): void {\n    this.observers = this.observers.filter(obs => {return obs !== observer})\n  }\n\n  /**\n   * Notify all observers.\n   */\n  notify (): void {\n    this.observers.forEach(observer => observer.update(this.state))\n  }\n}\n","/**\n * Legend of the void game loop class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nimport IGameLoop from './lib/interfaces/IGameLoop'\nimport IGame from './lib/interfaces/IGame'\n\nexport default class LegendLoop implements IGameLoop {\n  public game: IGame\n  public lastTime: number\n  public frameId: number\n\n  /**\n   * Constructor.\n   *\n   * @param {IGame} game Game instance\n   */\n  constructor (game: IGame) {\n    this.game = game\n    this.lastTime = null\n  }\n\n  /**\n   * Start the game loop.\n   */\n  public start (): void {\n    this.game.init()\n    this.game.state.running = true\n    this.frameId = requestAnimationFrame(this.loop.bind(this))\n  }\n\n  /**\n   * Stop the game loop.\n   */\n  public stop (): void {\n    this.game.state.running = false\n    if (this.frameId) {\n      cancelAnimationFrame(this.frameId)\n    }\n  }\n\n  /**\n   * Stop the game loop and start it again.\n   */\n  public restart (): void {\n    this.stop()\n    this.start()\n  }\n\n  /**\n   * Pause/unpause game.\n   */\n  public togglePause (): void {\n    this.game.state.paused = !this.game.state.paused\n  }\n\n  /**\n   * Main loop executing update and render methods.\n   */\n  public loop (time: number): void {\n    if (this.game.state.running) {\n      if (!this.game.state.paused) {\n        if (this.lastTime !== null) {\n          const diff = time - this.lastTime\n          this.game.state.update(diff / 1000)\n        }\n        this.lastTime = time\n        this.game.render()\n        this.frameId = requestAnimationFrame(this.loop.bind(this))\n      }\n    }\n  }\n}\n","export enum Actions {\n  UP = 'UP',\n  DOWN = 'DOWN',\n  LEFT = 'LEFT',\n  RIGHT = 'RIGHT',\n  SHOOT = 'SHOOT',\n  RESTART = 'RESTART',\n  ROTATE_LEFT = 'R-LEFT',\n  ROTATE_RIGHT = 'R-RIGHT'\n}\n","import Dimension from '../lib/geometry/Dimension'\nimport { Actions } from '../enum/Actions'\nimport Player from '../model/Player'\n/**\n * Pong game settings.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class Settings {\n  gameSize: Dimension\n  canvas: HTMLCanvasElement\n  keyboard\n  player\n\n  /**\n   * Constructor.\n   *\n   * @param {HTMLCanvasElement} canvas\n   */\n  constructor (canvas: HTMLCanvasElement) {\n    this.gameSize = new Dimension(canvas.width, canvas.height)\n    this.canvas = canvas\n    this.keyboard = {\n      'w': Actions.UP,\n      's': Actions.DOWN,\n      'ArrowUp': Actions.LEFT,\n      'ArrowDown': Actions.RIGHT,\n      'space': Actions.SHOOT,\n      'r': Actions.RESTART\n    }\n  }\n\n  /**\n   *\n   * @param value\n   * @returns {string}\n   */\n  findKey (value): string {\n    return Object.keys(this.keyboard).filter(key => this.keyboard[key] === value)[0]\n  }\n\n  /**\n   *\n   * @param newKey\n   * @param {Actions} action\n   */\n  setKey (newKey, action: Actions): void {\n    let oldKey = this.findKey(action)\n    if (newKey !== oldKey) {\n      console.log('old:' + oldKey, ' new: ' + newKey + ' value: ' + action)\n      this.keyboard[newKey] = this.keyboard[oldKey]\n      delete this.keyboard[oldKey]\n    }\n  }\n}\n","import Vector2 from '../math/Vector2'\nimport Settings from '../../config/Settings'\nimport Dimension from '../geometry/Dimension'\nimport IJSONSerializable from '../interfaces/IJSONSerializable'\n\n/**\n * Base entity class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class Entity implements IJSONSerializable {\n  id: string\n  dimension: Dimension\n  settings: Settings\n  position: Vector2\n\n  /**\n   * Constructor. Sets position and dimension of entity.\n   *\n   * @param {Vector2} position Initial position\n   * @param {Dimension} dimension Initial dimension\n   * @param {Settings} settings\n   */\n  constructor (position?: Vector2, dimension?: Dimension, settings?: Settings) {\n    this.position = position\n    this.dimension = dimension\n    this.settings = settings\n  }\n\n  public init (): void {\n    throw new Error('Implement in subclass.')\n  }\n\n  /**\n   * Create a JSON string from this object.\n   * \n   * @returns {string} The JSoN string\n   */\n  public toJSON (): string {\n    return JSON.stringify(this)\n  }\n\n  /**\n   * Load data into this object from JSON.\n   *\n   * @param json JSON string\n   */\n  public fromJSON (json: string): void {\n    const obj = JSON.parse(json)\n    \n    // Map parsed object to the attributes of this entity.\n    Object.keys(obj).forEach(key => {\n      if ( this.hasOwnProperty( key ) ) {\n        this[key] = obj[key]\n      }\n    })\n  }\n}\n","import Entity from '../lib/entity/Entity'\nimport Settings from '../config/Settings'\nimport Vector2 from '../lib/math/Vector2'\nimport Dimension from '../lib/geometry/Dimension'\nimport Turret from './Turret'\nimport IRenderable from '../lib/interfaces/IRenderable'\nimport { ContextId } from '../enum/ContextId'\nimport { AssetId } from '../enum/AssetId'\n\n/**\n * 2D Tower defense tile class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class Tile extends Entity implements IRenderable {\n  contextId: ContextId\n  assetId: AssetId\n  asset\n  blocked: boolean\n  buildable: boolean\n  turret: Turret\n  color: string\n\n  /**\n   * Conscrutor.\n   *\n   * @param x\n   * @param y\n   * @param width\n   * @param height\n   * @param settings\n   */\n  constructor (x: number, y: number, width: number, height: number, settings: Settings) {\n    super(new Vector2(x, y), new Dimension(width, height), settings)\n    this.color = '#ffffff'\n    this.contextId = ContextId.BACKGROUND\n  }\n\n  init (): void {\n\n  }\n\n  render (ctx: CanvasRenderingContext2D): void {\n    ctx.fillStyle = this.color\n    ctx.fillRect(this.position.x, this.position.y, this.dimension.width, this.dimension.height)\n  }\n\n  clear (ctx: CanvasRenderingContext2D): void {\n    ctx.clearRect(this.position.x, this.position.y, this.dimension.width, this.dimension.height)\n  }\n}\n","import QuadTree from './QuadTree'\nimport ICollisionManager from '../interfaces/ICollisionManager'\n\n/**\n * Collision Manager.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class CollisionManager implements ICollisionManager {\n  quadTree: QuadTree\n\n  /**\n   * Constructor.\n   *\n   * @param {QuadTree} quadTree\n   */\n  constructor (quadTree: QuadTree) {\n    this.quadTree = quadTree\n  }\n\n  /**\n   * Collision detection algorithm.\n   */\n  detectCollision (): void {\n    let objects = []\n    this.quadTree.getAllObjects(objects)\n    for (let i = 0; i < objects.length; i++) {\n      let obj = []\n      this.quadTree.findObjects(obj, objects[i])\n\n      for (let j = 0; j < obj.length; j++) {\n        if (objects[i].isCollideAbleWith(obj[j]) &&\n          (Math.floor(objects[i].position.x) < Math.floor(obj[j].position.x) + obj[j].dimension.width &&\n            Math.floor(objects[i].position.x) + objects[i].dimension.width > Math.floor(obj[j].position.x) &&\n            Math.floor(objects[i].position.y) < Math.floor(obj[j].position.y) + obj[j].dimension.height &&\n            Math.floor(objects[i].position.y) + objects[i].dimension.height > Math.floor(obj[j].position.y))\n        && objects[i].alive && obj[j].alive) {\n          console.log(objects[i])\n          objects[i].colliding = true\n          obj[j].colliding = true\n        }\n      }\n    }\n  }\n}\n","/**\n * Sound class used to play a sound from a file.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class Sound {\n  audioContext: AudioContext\n  source: AudioBufferSourceNode\n  gainNode: GainNode\n  masterGain: GainNode\n  buffer\n  playing: boolean\n\n  /**\n   *\n   * @param audioContext\n   * @param {GainNode} masterGain\n   * @param buffer\n   */\n  constructor (audioContext, masterGain: GainNode, buffer) {\n    this.audioContext = audioContext\n    this.masterGain = masterGain\n    this.buffer = buffer\n    this.gainNode = this.audioContext.createGain()\n    this.gainNode.gain.value = 0.2\n    this.gainNode.connect(this.masterGain)\n    this.playing = false\n  }\n\n  /**\n   *\n   * @param {boolean} loop\n   */\n  play (loop = false): void {\n    this.source = this.audioContext.createBufferSource()\n    this.source.buffer = this.buffer\n    this.source.loop = loop\n    this.source.connect(this.gainNode)\n    this.source.start(0)\n  }\n\n  /**\n   *\n   */\n  stop (): void {\n    if (this.source) {\n      this.source.stop(0)\n    }\n  }\n}\n","import Sound from '../audio/Sound'\n\n/**\n * Audio manager class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class AudioManager {\n  private audioContext: AudioContext\n  private masterGain: GainNode\n  private effectsGain: GainNode\n  private ambientGain: GainNode\n\n  /**\n   *\n   */\n  constructor () {\n    this.initAudioContext()\n  }\n\n  /**\n   *\n   */\n  initAudioContext (): void {\n    try {\n      // Fix for browsers using prefixes\n      window.AudioContext = window.AudioContext || webkitAudioContext\n      this.audioContext = new AudioContext()\n      this.masterGain = this.audioContext.createGain()\n      this.effectsGain = this.audioContext.createGain()\n      this.ambientGain = this.audioContext.createGain()\n      this.masterGain.gain.value = 1\n      this.masterGain.connect(this.audioContext.destination)\n      this.effectsGain.connect(this.masterGain)\n      this.ambientGain.connect(this.masterGain)\n      this.ambientGain.gain.value = 1\n      this.effectsGain.gain.value = 1\n    } catch (e) {\n      console.log('Web Audio API is not supported in this browser')\n    }\n  }\n\n  /**\n   *\n   * @param data\n   * @param id\n   * @param callback\n   */\n  decodeAudio (data, id, callback): void {\n    this.audioContext.decodeAudioData(data).then(\n      buffer => callback(buffer),\n      error => { console.log('Error with decoding audio data' + error) }\n    )\n  }\n\n  /**\n   *\n   * @param {number} value\n   */\n  adjustMasterVolume (value: number): void {\n    this.masterGain.gain.value = value\n  }\n\n  /**\n   *\n   * @param {number} value\n   */\n  adjustAmbientVolume (value: number): void {\n    this.ambientGain.gain.value = value\n  }\n\n  /**\n   *\n   * @param {number} value\n   */\n  adjustEffectsVolume (value: number): void {\n    this.effectsGain.gain.value = value\n  }\n\n  /**\n   *\n   * @param buffer\n   * @param {boolean} ambient\n   * @returns {Sound}\n   */\n  createSound (buffer, ambient: boolean): Sound {\n    return new Sound(this.audioContext, ambient ? this.ambientGain : this.effectsGain, buffer)\n  }\n}\n","export enum EntityType {\n  PLAYER = 'ship',\n  ENEMY = 'enemy',\n  ENEMY_BULLET = 'bulletEnemy',\n  PLAYER_BULLET = 'bullet',\n  BACKGROUND = 'background',\n  MAP = 'map',\n  GAME_OVER = 'gameOver',\n  LASER = 'laser',\n  MAIN_THEME = 'shockWave',\n  EXPLOSION_I = 'explosion1',\n  EXPLOSION_II = 'explosion2',\n  BOX = 'box',\n  ARENA = 'arena'\n}\n\n/**\n * Interface for collideable entities.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default interface ICollideAble {\n  collidesWith: EntityType[]\n  colliding: boolean\n  type: EntityType\n\n  /**\n   *\n   * @param {ICollideAble} other\n   * @returns {boolean}\n   */\n  isCollideAbleWith (other: ICollideAble): boolean\n}\n","import HitBox from './HitBox'\nimport ICollideAble from '../interfaces/ICollideAble'\n\n/**\n * QuadTree class used to optimize collision checking.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class QuadTree {\n  level: number\n  maxObjects: number\n  maxLevels: number\n  hitBox: HitBox\n  objects: ICollideAble[]\n  nodes: QuadTree[]\n\n  /**\n   * Constructor.\n   *\n   * @param {HitBox} hitBox\n   * @param {number} level\n   */\n  constructor (hitBox = new HitBox(0, 0, 0, 0), level = 0) {\n    this.level = level\n    this.maxObjects = 10\n    this.maxLevels = 5\n    this.hitBox = hitBox\n    this.objects = []\n    this.nodes = []\n  }\n\n  /**\n   * Clears the QuadTree and its sub nodes from all models objects.\n   */\n  clear (): void {\n    this.objects = []\n    this.nodes.forEach(node => node.clear())\n    this.nodes = []\n  }\n\n  /**\n   *\n   * @param returnedObjects\n   * @returns {any}\n   */\n  getAllObjects (returnedObjects) {\n    this.nodes.forEach(node => node.getAllObjects(returnedObjects))\n    this.objects.forEach(object => returnedObjects.push(object))\n    return returnedObjects\n  }\n\n  /**\n   *\n   * @param returnedObjects\n   * @param object\n   * @returns {any}\n   */\n  findObjects (returnedObjects, object) {\n    if (typeof object === 'undefined') {\n      console.log('UNDEFINED OBJECT')\n      return\n    }\n    let index = this.getIndex(object)\n    if (index !== -1 && this.nodes.length) {\n      this.nodes[index].findObjects(returnedObjects, object)\n    }\n    this.objects.forEach(obj => returnedObjects.push(obj))\n    return returnedObjects\n  }\n\n  /**\n   * Insert an object into the QuadTree.\n   *\n   * @param object\n   */\n  insert (object): void {\n    if (typeof object === 'undefined') {\n      return\n    }\n    if (object instanceof Array) {\n      object.forEach(element => this.insert(element))\n      return\n    }\n    if (this.nodes.length > 0) {\n      let index = this.getIndex(object)\n      // Only addVector the object to a sub node if it can fit completely within one\n      if (index !== -1) {\n        this.nodes[index].insert(object)\n        return\n      }\n    }\n    this.objects.push(object)\n\n    if (this.objects.length > this.maxObjects && this.level < this.maxLevels) {\n      if (typeof this.nodes[0] === 'undefined') {\n        this.split()\n      }\n      let i = 0\n      while (i < this.objects.length) {\n        let index = this.getIndex(this.objects[i])\n        if (index !== -1) {\n          this.nodes[index].insert((this.objects.splice(i, 1))[0])\n        } else {\n          i++\n        }\n      }\n    }\n  }\n\n  /**\n   * Get the index of an object from the QuadTree.\n   *\n   * @param object\n   * @returns {number}\n   */\n  getIndex (object): number {\n    let index = -1\n    let verticalMidpoint = this.hitBox.position.x + this.hitBox.width / 2\n    let horizontalMidpoint = this.hitBox.position.y + this.hitBox.height / 2\n    // Object can fit completely within the top quadrant\n    let topQuadrant = (object.position.y < horizontalMidpoint && object.position.y + object.height < horizontalMidpoint)\n    // Object can fit completely within the bottom quadrant\n    let bottomQuadrant = (object.position.y > horizontalMidpoint)\n    // Object can fit completely within the left quadrants\n    if (object.position.x < verticalMidpoint && object.position.x + object.width < verticalMidpoint) {\n      if (topQuadrant) {\n        index = 1\n      } else if (bottomQuadrant) {\n        index = 2\n      }\n    } else if (object.position.x > verticalMidpoint) { // Object can fix completely within the right quadrants\n      if (topQuadrant) {\n        index = 0\n      } else if (bottomQuadrant) {\n        index = 3\n      }\n    }\n    return index\n  }\n\n  /**\n   * Split the tree on demand.\n   */\n  split (): void {\n    let subWidth = (this.hitBox.width / 2) | 0\n    let subHeight = (this.hitBox.height / 2) | 0\n    this.nodes[0] = new QuadTree(\n      new HitBox(this.hitBox.position.x + subWidth, this.hitBox.position.y, subWidth, subHeight), this.level + 1)\n    this.nodes[1] = new QuadTree(\n      new HitBox(this.hitBox.position.x, this.hitBox.position.y, subWidth, subHeight), this.level + 1)\n    this.nodes[2] = new QuadTree(\n      new HitBox(this.hitBox.position.x, this.hitBox.position.y + subHeight, subWidth, subHeight), this.level + 1)\n    this.nodes[3] = new QuadTree(\n      new HitBox(this.hitBox.position.x + subWidth, this.hitBox.position.y + subHeight, subWidth, subHeight), this.level + 1)\n  }\n}\n","import IGameState from './lib/interfaces/IGameState'\nimport QuadTree from './lib/collision/QuadTree'\nimport Entity from './lib/entity/Entity'\nimport ICollideAble from './lib/interfaces/ICollideAble'\nimport Settings from './config/Settings'\nimport InputManager from './lib/client/InputManager'\nimport IRenderable from './lib/interfaces/IRenderable'\nimport IMovable from './lib/interfaces/IMovable'\nimport Tile from './model/Tile'\nimport Observable from './lib/observer/Observable'\nimport HitBox from './lib/collision/HitBox'\n\n/**\n * Legend of the void game state class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class LegendState extends Observable implements IGameState {\n  public running: boolean\n  public paused: boolean\n  public quadTree: QuadTree\n  public entities: Entity[]\n  public collideables: ICollideAble[]\n  public movables: IMovable[]\n  public renderables: IRenderable[]\n  public map: Tile[]\n\n  /**\n   * Constructor.\n   *\n   * @param {Settings} settings\n   * @param {InputManager} inputManager\n   */\n  constructor (settings: Settings, inputManager: InputManager) {\n    super()\n    this.running = false\n    this.paused = false\n    this.entities = []\n    this.quadTree = new QuadTree(new HitBox(0, 0, settings.gameSize.width, settings.gameSize.height))\n    this.collideables = []\n    this.movables = []\n    this.renderables = []\n    this.state = {\n      kills: 0,\n      cash: 0\n    }\n  }\n\n  public update (dt: number): void {\n    this.movables.forEach(movable => movable.move(dt))\n  }\n\n  public reset (): void {\n    this.entities.forEach(entity => entity.init())\n  }\n\n  public scorePoints (points: number): void {\n    this.state.cash += points\n    this.state.kills++\n    this.notify()\n  }\n}\n","export default class Ajax {\n  private static defaults = {\n    url: '',\n    method: 'GET',\n    contentType: 'text/html',\n    async: true,\n    data: null\n  }\n\n  /**\n   * Create and send an XML-HTTP request.\n   * Requires an options object.\n   *\n   * @param opts Possible option properties:\n   * url = url to send the request to.\n   * method = request method. GET, POST, PUT, DELETE.\n   * contentType = specify the content type of the request.\n   * async = boolean flag for async calls. Defaults to true.\n   * data = request body.\n   * @param callback success callback function\n   */\n  public static create (opts, callback): void {\n    let xHttp = new XMLHttpRequest()\n    xHttp.addEventListener('load', () => {\n      callback(xHttp.response)\n    })\n    xHttp.open(\n      opts.method ? opts.method : Ajax.defaults.method,\n      opts.url ? opts.url : Ajax.defaults.url,\n      opts.async ? opts.async : Ajax.defaults.async\n    )\n    if (opts.hasOwnProperty('contentType')) {\n      xHttp.setRequestHeader(\n        'Content-Type',\n        opts.contentType ? opts.contentType : Ajax.defaults.contentType\n      )\n    }\n    if (opts.hasOwnProperty('responseType')) {\n      xHttp.responseType = opts.responseType\n    }\n    if (opts.hasOwnProperty('data') && typeof opts.data === 'object') {\n      opts.data = JSON.stringify(opts.data)\n    }\n    xHttp.send(opts.data ? opts.data : null)\n  }\n}\n","/**\n * Sprite sheet definition.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class SpriteSheet {\n  public image: HTMLImageElement\n  public frameWidth: number\n  public frameHeight: number\n  public framesPerRow: number\n\n  /**\n   * Constructor. Sets frame dimensions and calculates number of frames.\n   *\n   * @param image\n   * @param frameWidth\n   * @param frameHeight\n   */\n  constructor (image: HTMLImageElement, frameWidth, frameHeight) {\n    this.image = image\n    this.frameWidth = frameWidth\n    this.frameHeight = frameHeight\n    this.framesPerRow = Math.floor(image.width / frameWidth)\n  }\n}\n","import SpriteSheet from '../graphics/2D/SpriteSheet'\nimport Sound from '../audio/Sound'\nimport Ajax from '../ajax/Ajax'\nimport { AssetId } from '../../enum/AssetId'\nimport AudioManager from './AudioManager'\n\nexport enum AssetType {\n  SPRITE = 'sprite', SPRITE_SHEET = 'sprite-sheet', AUDIO = 'audio', AUDIO_AMB = 'audio-amb'\n}\n\n/**\n * Asset manager Class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class AssetManager {\n  private cache\n  private assetsDir: string\n  private queue\n  private downloadCount: number\n  private audioManager: AudioManager\n\n  /**\n   * Constructor.\n   *\n   * @param {AudioManager} audioManager\n   */\n  constructor (audioManager: AudioManager) {\n    this.cache = []\n    this.assetsDir = 'assets/'\n    this.downloadCount = 0\n    this.queue = []\n    this.audioManager = audioManager\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  done (): boolean {\n    return this.downloadCount === this.queue.length\n  }\n\n  /**\n   *\n   * @param {AssetId} id\n   * @param {AssetType} type\n   * @param {any} opts\n   */\n  queueDownload (id: AssetId, type: AssetType, opts = null): void {\n    this.queue.push({ id: id, path: this.assetsDir + type + '/' + id, type: type, opts: opts })\n  }\n\n  /**\n   * Build an AJAX Request to loadAudio audio file into the buffer cache.\n   *\n   * @param item object with name of file and path to file\n   * @param callback function to execute on done\n   */\n  loadAudio (item, callback): void {\n    Ajax.create({\n      method: 'GET',\n      url: item.path,\n      responseType: 'arraybuffer'\n    }, response => {\n      this.audioManager.decodeAudio(response, item.id, buffer => {\n        this.cache.audio[item.id] = buffer\n        this.downloadCount += 1\n        if (this.done()) {\n          callback()\n        }\n      })\n    })\n  }\n\n  /**\n   *\n   * @param item\n   * @param callback\n   */\n  loadSprite (item, callback): void {\n    let sprite = new Image()\n    sprite.addEventListener('load', () => {\n      this.downloadCount++\n      if (this.done()) {\n        callback()\n      }\n    })\n    sprite.src = item.path\n    this.cache.sprites[item.id] = sprite\n  }\n\n  /**\n   * Load sprites sheet.\n   *\n   * @param item sprite sheet info\n   * @param callback called upon downloading all\n   */\n  loadSpriteSheet (item, callback): void {\n    let spriteSheet = new Image()\n    spriteSheet.addEventListener('load', () => {\n      this.cache.spriteSheets[item.id] = new SpriteSheet(spriteSheet, item.opts.frameWidth || 0, item.opts.frameHeight || 0)\n      this.downloadCount += 1\n      if (this.done()) {\n        callback()\n      }\n    })\n    spriteSheet.src = item.path\n  }\n\n  /**\n   *\n   * @param callback\n   */\n  downloadAll (callback): void {\n    this.queue.forEach(item => {\n      if (item.type === AssetType.AUDIO) {\n        this.loadAudio(item, callback)\n      } else if (item.type === AssetType.SPRITE) {\n        this.loadSprite(item, callback)\n      } else if (item.type === AssetType.SPRITE_SHEET) {\n        this.loadSpriteSheet(item, callback)\n      }\n    })\n  }\n\n  /**\n   * Create an audio buffer source node from cached buffer.\n   * Send it to the destination of the audio context and play it.\n   *\n   * @param {AssetId} id File id\n   * @param {AssetType} type\n   */\n  get (id: AssetId, type: AssetType = AssetType.SPRITE): Sound {\n    if (type === AssetType.AUDIO || type === AssetType.AUDIO_AMB) {\n      let ambient = type === AssetType.AUDIO_AMB\n      return this.audioManager.createSound(this.cache[id], ambient)\n    } else {\n      return this.cache[id]\n    }\n  }\n}\n","import Observable from '../observer/Observable'\nimport Settings from '../../config/Settings'\n\n/**\n * Input manager class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class InputManager extends Observable {\n  inputMap\n  touches\n\n  /**\n   *\n   */\n  constructor (settings: Settings) {\n    super()\n    this.inputMap = settings.keyboard\n    this.init()\n    this.initializeTouchHandler()\n    this.touches = {\n      start: [],\n      move: []\n    }\n  }\n\n  /**\n   * Register pressed keys and notify observers.\n   */\n  init (): void {\n    window.addEventListener('keydown', event => {\n      let key = event.key !== ' ' ? event.key : 'space'\n      this.state[this.inputMap[key]] = true\n      this.notify()\n    })\n    window.addEventListener('keyup', event => {\n      let key = event.key !== ' ' ? event.key : 'space'\n      this.state[this.inputMap[key]] = false\n      this.notify()\n    })\n  }\n\n  /**\n   * Maps swipe directions to key press booleans.\n   * Allows touch controls on mobile.\n   */\n  initializeTouchHandler (): void {\n    // Register the event listeners\n    let button = document.getElementById('move')\n    let el = button ? button : window\n    el.addEventListener('touchstart', handleTouchStart, false)\n    el.addEventListener('touchmove', handleTouchMove, false)\n    el.addEventListener('touchend', handleTouchEnd, false)\n    el.addEventListener('contextmenu', event => {\n      event.preventDefault()\n      return false\n    })\n\n    let start = []\n    let move = []\n    let touchstartX = 0\n    let touchstartY = 0\n    let toucheMoveX = 0\n    let touchMoveY = 0\n    let thisInstance = this\n\n    function handleTouchStart (evt): void {\n      evt.preventDefault()\n      start = evt.touches\n      touchstartX = evt.touches[0].pageX\n      touchstartY = evt.touches[0].pageY\n    }\n\n    function handleTouchMove (evt): void {\n      thisInstance.reset()\n      evt.preventDefault()\n      move = evt.changedTouches\n      toucheMoveX = evt.touches[0].pageX\n      touchMoveY = evt.touches[0].pageY\n      for (let i = 0; i < evt.touches.length; i++) {\n        // Positive values equals left. Negative values equals right\n        if (move[i].pageX < start[i].pageX) {\n          thisInstance.state[thisInstance.inputMap['a']] = true\n        }\n        if (move[i].pageX > start[i].pageX) {\n          thisInstance.state[thisInstance.inputMap['d']] = true\n        }\n        if (move[i].pageY < start[i].pageY) {\n          thisInstance.state[thisInstance.inputMap['w']] = true\n        }\n        if (move[i].pageY > start[i].pageY) {\n          thisInstance.state[thisInstance.inputMap['s']] = true\n        }\n        thisInstance.notify()\n      }\n    }\n\n    function handleTouchEnd (evt): void {\n      evt.preventDefault()\n      thisInstance.reset()\n    }\n  }\n\n  shoot (): void {\n    this.state[this.inputMap['space']] = true\n  }\n\n  cancelShoot (): void {\n    this.state[this.inputMap['space']] = false\n  }\n\n  reset (): void {\n    this.state[this.inputMap['w']] = false\n    this.state[this.inputMap['a']] = false\n    this.state[this.inputMap['s']] = false\n    this.state[this.inputMap['d']] = false\n  }\n}\n","import IGameState from './lib/interfaces/IGameState'\nimport IGame from './lib/interfaces/IGame'\nimport ICollisionManager from './lib/interfaces/ICollisionManager'\nimport InputManager from './lib/client/InputManager'\nimport AssetManager from './lib/client/AssetManager'\nimport { ContextId } from './enum/ContextId'\nimport Settings from './config/Settings'\nimport LegendState from './LegendState'\nimport AudioManager from './lib/client/AudioManager'\nimport CollisionManager from './lib/collision/CollisionManager'\nimport * as mapData from './../public/definitions/maps.json'\nimport Tile from './model/Tile'\n\n/**\n * Main game Class.\n *\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class LegendOfTheVoid implements IGame {\n  audioManager: AudioManager\n  inputManager: InputManager\n  assetManager: AssetManager\n  collisionManager: ICollisionManager\n  state: IGameState\n  contexts: Map<ContextId, CanvasRenderingContext2D>\n  settings: Settings\n\n  /**\n   * Constructor.\n   *\n   * @param {Map<ContextId, CanvasRenderingContext2D>} contexts\n   * @param {Settings} settings\n   */\n  constructor (contexts: Map<ContextId, CanvasRenderingContext2D>, settings: Settings) {\n    this.audioManager = new AudioManager()\n    this.inputManager = new InputManager(settings)\n    this.assetManager = new AssetManager(this.audioManager)\n    this.state = new LegendState(settings, this.inputManager)\n    this.collisionManager = new CollisionManager(this.state.quadTree)\n    this.contexts = contexts\n    this.settings = settings\n  }\n\n  /**\n   * Initialize the game.\n   */\n  init (): void {\n    console.log(mapData)\n    let y = 0\n    mapData[0].tiles.forEach(row => {\n      let width = 30\n      let height = 30\n      let x = 0\n      row.forEach(col => {\n        const tile = new Tile(x, y, width, height, this.settings)\n        switch (col) {\n          case 0:\n            tile.blocked = true\n            tile.color = '#000000'\n            break\n          case 1:\n            tile.buildable = true\n            tile.color = '#ff00ff'\n            break\n          case 3:\n            tile.color = '#00ff00'\n            break\n          case 4:\n            tile.color = '#ff0000'\n            break\n        }\n        this.state.entities.push(tile)\n        this.state.renderables.push(tile)\n        x += width\n      })\n      y += height\n    })\n    this.assetManager.downloadAll(() => {\n      this.state.renderables.forEach(renderable => renderable.asset = this.assetManager.get(renderable.assetId))\n      this.state.reset()\n    })\n  }\n\n  /**\n   * Render current state.\n   */\n  render (): void {\n    this.state.renderables.forEach(renderable => renderable.render(this.contexts.get(renderable.contextId)))\n  }\n\n  /**\n   *\n   */\n  clear (): void {\n    this.state.renderables.forEach(renderable => renderable.clear(this.contexts.get(renderable.contextId)))\n  }\n}\n","import LegendOfTheVoid from './LegendOfTheVoid'\nimport GameSettings from './config/Settings'\nimport LegendState from './LegendState'\nimport InputManager from './lib/client/InputManager'\nimport { ContextId } from './enum/ContextId'\nimport LegendLoop from './LegendLoop'\n\n/**\n * Entry script for legend of the void.\n *\n * @author Daniel Peters\n * @version 1.0\n */\ndocument.addEventListener('DOMContentLoaded', () => {\n  const container = document.getElementById('contents')\n  const contexts = new Map<ContextId, CanvasRenderingContext2D>()\n  const bgCanvas = document.createElement('canvas')\n  const creepCanvas = document.createElement('canvas')\n  const playerCanvas = document.createElement('canvas')\n  container.appendChild(bgCanvas)\n  container.appendChild(creepCanvas)\n  container.appendChild(playerCanvas)\n  contexts.set(ContextId.BACKGROUND, bgCanvas.getContext('2d'))\n  contexts.set(ContextId.CREEPS, creepCanvas.getContext('2d'))\n  contexts.set(ContextId.PLAYER, playerCanvas.getContext('2d'))\n  bgCanvas.width = window.innerWidth\n  bgCanvas.height = window.innerHeight\n  creepCanvas.width = window.innerWidth\n  creepCanvas.height = window.innerHeight\n  playerCanvas.width = window.innerWidth\n  playerCanvas.height = window.innerHeight\n\n  const settings = new GameSettings(bgCanvas)\n  const game = new LegendOfTheVoid(contexts, settings)\n  const loop = new LegendLoop(game)\n\n  loop.start()\n})"],"sourceRoot":""}